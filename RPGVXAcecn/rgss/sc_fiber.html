<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML lang=en><HEAD><TITLE>Fiber</TITLE>
<META content="text/html; charset=ISO-8859-1" http-equiv=Content-Type>
<META content=text/css http-equiv=Content-Style-Type><LINK rel=stylesheet 
type=text/css href="../style.css">
<META name=GENERATOR content="MSHTML 9.00.8112.16447"></HEAD>
<BODY>
<H1><FONT face=&#24494;&#36719;&#38597;&#40657;>Fiber &#32447;&#31243;&#31867;</FONT></H1>
<P><FONT 
face=&#24494;&#36719;&#38597;&#40657;>&#29992;&#20110;&#25552;&#20379;&#19968;&#20010;&#38750;&#29420;&#21344;&#30340;&#36731;&#37327;&#22411;&#32447;&#31243;&#65288;&#21363;Fiber&#65289;&#65292;&#20063;&#23601;&#26159;&#20854;&#20182;&#32534;&#31243;&#35821;&#35328;&#20013;&#30340;&#21327;&#31243;/&#21322;&#21327;&#31243;&#65288;&#20855;&#20307;&#35828;&#26126;&#24314;&#35758;&#33258;&#34892;&#30334;&#24230;&#65292;&#22826;&#36807;&#22797;&#26434;&#20102;OTL&#65289;&#12290;</FONT></P>
<P><FONT 
face=&#24494;&#36719;&#38597;&#40657;>&#19968;&#20010;&#32447;&#31243;&#30340;&#29615;&#22659;&#36890;&#24120;&#19981;&#20250;&#25913;&#21464;&#65292;&#38500;&#38750;&#20570;&#20986;&#20102;&#26126;&#30830;&#30340;&#35828;&#26126;&#12290;&#32447;&#31243;&#20063;&#26159;&#35201;&#36827;&#34892;&#25215;&#25509;&#30340;&#65292;&#27604;&#22914;Fiber#resume&#65288;&#21363;&#31243;&#24207;&#20986;&#29616;&#38169;&#35823;&#21518;&#32487;&#32493;&#36816;&#34892;&#19979;&#19968;&#34892;&#30340;&#35821;&#21477;&#65289;&#26159;&#27597;&#32447;&#31243;&#65292;&#32780;Fiber&#21017;&#26159;&#23376;&#32447;&#31243;&#65288;&#19981;&#36807;&#36825;&#20010;&#27597;&#23376;&#24182;&#27809;&#26377;&#20174;&#23646;&#20851;&#31995;&#65289;&#12290;&#19981;&#36981;&#24490;&#30001;&#27597;&#32447;&#31243;&#21040;&#23376;&#32447;&#31243;&#30340;&#35268;&#21017;&#30340;&#36807;&#31243;&#26159;&#19981;&#34987;&#20801;&#35768;&#30340;&#65288;&#27604;&#22914;&#30001;&#23376;&#32447;&#31243;&#21040;&#27597;&#32447;&#31243;&#30340;&#36807;&#28193;&#65289;&#65292;&#36825;&#20250;&#23548;&#33268;&#20986;&#29616;&#19968;&#20010;FibberError&#65288;&#32447;&#31243;&#38169;&#35823;&#65289;&#30340;&#24322;&#24120;&#12290;&#20197;&#19979;&#20004;&#26465;&#26159;&#21487;&#20197;&#34987;&#20801;&#35768;&#30340;&#65306;</FONT></P>
<UL>
  <LI><FONT face=&#24494;&#36719;&#38597;&#40657;>Fiber#resume &#23558;&#29615;&#22659;&#20999;&#25442;&#21040;&#23427;&#30340;&#23376;&#32447;&#31243;&#12290; </FONT>
  <LI><FONT face=&#24494;&#36719;&#38597;&#40657;>Fiber.yield &#23558;&#29615;&#22659;&#20999;&#25442;&#21040;&#23427;&#30340;&#27597;&#32447;&#31243;&#12290; </FONT></LI></UL>
<P><FONT face=&#24494;&#36719;&#38597;&#40657;>&#24403;&#28982;&#65292;&#36825;&#37324;&#30340;&#27597;&#23376;&#20851;&#31995;&#26159;&#21160;&#24577;&#30340;&#65292;&#24182;&#19988;&#22312;&#29615;&#22659;&#20999;&#25442;&#22238;&#27597;&#32447;&#31243;&#30340;&#21516;&#26102;&#65292;&#36825;&#31181;&#20851;&#31995;&#21363;&#21578;&#35299;&#38500;&#12290;</FONT></P>
<P><FONT face=&#24494;&#36719;&#38597;&#40657;>&#24403;&#19968;&#20010;&#32447;&#31243;&#32467;&#26463;&#65292;&#29615;&#22659;&#23558;&#20250;&#33258;&#21160;&#20999;&#25442;&#22238;&#27597;&#32447;&#31243;&#12290;</FONT></P>
<H2><FONT face=&#24494;&#36719;&#38597;&#40657;>&#36229;&#31867;</FONT></H2>
<UL>
  <LI><A href="sc_object.html"><FONT face=&#24494;&#36719;&#38597;&#40657;>Object &#23545;&#35937;&#31867;</FONT></A><FONT 
  face=&#24494;&#36719;&#38597;&#40657;> </FONT></LI></UL>
<H2><FONT face=&#24494;&#36719;&#38597;&#40657;>&#31616;&#35201;&#25945;&#31243;</FONT></H2>
<P><FONT 
face=&#24494;&#36719;&#38597;&#40657;>&#32447;&#31243;&#26159;&#29992;&#26469;&#22312;&#26576;&#19968;&#20010;&#36816;&#34892;&#33410;&#28857;&#19978;&#20999;&#25442;&#31243;&#24207;&#36816;&#34892;&#29615;&#22659;&#65292;&#24182;&#26368;&#32456;&#24674;&#22797;&#21407;&#20808;&#30340;&#29615;&#22659;&#30340;&#26041;&#27861;&#12290;Fiber.new&#20989;&#25968;&#21487;&#20197;&#21019;&#24314;&#19968;&#20010;&#21253;&#21547;&#21306;&#22359;&#30340;&#26032;&#32447;&#31243;&#65292;&#20351;&#29992;Fiber#recume&#20989;&#25968;&#21017;&#21487;&#20197;&#20999;&#25442;&#21040;&#23427;&#25152;&#23450;&#20041;&#30340;&#32447;&#31243;&#36816;&#34892;&#29615;&#22659;&#20043;&#20013;&#65292;Fiber.yield&#21017;&#21487;&#20197;&#22312;&#23376;&#32447;&#31243;&#20013;&#36816;&#34892;&#20197;&#23558;&#36816;&#34892;&#29615;&#22659;&#20999;&#25442;&#21040;&#27597;&#32447;&#31243;&#20043;&#20013;&#12290;Fiber.yield&#20989;&#25968;&#30340;&#21442;&#25968;&#26159;Fiber#resume&#20989;&#25968;&#22312;&#27597;&#32447;&#31243;&#20013;&#30340;&#36820;&#22238;&#20540;&#12290;</FONT></P><PRE><FONT face=&#24494;&#36719;&#38597;&#40657;>f = Fiber.new do
  n = 0
  loop do
    Fiber.yield(n)
    n += 1
  end
end

5.times do
  p f.resume
end

#=&gt; 0
    1
    2
    3
    4
</FONT></PRE>
<H2><FONT face=&#24494;&#36719;&#38597;&#40657;>&#31169;&#26377;&#26041;&#27861;</FONT></H2>
<DL>
  <DT><FONT face=&#24494;&#36719;&#38597;&#40657;>new {|<VAR>obj</VAR>| ... } </FONT>
  <DD>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>&#21019;&#24314;&#24182;&#36820;&#22238;&#19968;&#20010;&#21253;&#21547;&#30528;&#21306;&#22359;&#30340;&#32447;&#31243;&#12290;&#21306;&#22359;&#20013;&#20351;&#29992;&#21040;&#30340;&#21442;&#25968;&#21017;&#38656;&#35201;&#22312;&#24320;&#22836;&#21152;&#20197;&#25351;&#23450;.</FONT></P>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>&#24403;&#21306;&#22359;&#25191;&#34892;&#32467;&#26463;&#26102;&#65292;&#36816;&#34892;&#29615;&#22659;&#20250;&#36339;&#36716;&#33267;&#27597;&#32447;&#31243;&#12290;&#32780;&#21306;&#22359;&#30340;&#36816;&#31639;&#32467;&#26524;&#20063;&#22312;&#21516;&#26102;&#34987;&#36820;&#22238;&#12290;</FONT></P><PRE><FONT face=&#24494;&#36719;&#38597;&#40657;>a = nil
f = Fiber.new do |obj|
  a = obj
  :hoge
end

b = f.resume(:foo)
p a  #=&gt; :foo
p b  #=&gt; :hoge
</FONT></PRE>
  <DT><FONT face=&#24494;&#36719;&#38597;&#40657;>yield(<VAR>*arg = nil</VAR>) </FONT>
  <DD>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>&#23558;&#36816;&#34892;&#29615;&#22659;&#20999;&#25442;&#33267;&#24403;&#21069;&#32447;&#31243;&#30340;&#27597;&#32447;&#31243;&#12290;</FONT></P>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>&#24403;&#36816;&#34892;&#29615;&#22659;&#20999;&#25442;&#23436;&#27605;&#20043;&#21518;&#65292;yield &#26041;&#27861;&#20250;&#23558;&#32473;&#23450;&#30340;&#21442;&#25968;&#36820;&#22238;&#21040; Fiber#resume &#12290;</FONT></P>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>&#23545;&#20110;&#21442;&#25968;&nbsp;<VAR>arg</VAR> &#65292;&#25351;&#23450;&#30340;&#23545;&#35937;&#20250;&#20256;&#36882;&#21040;&#24403;&#21069;&#32447;&#31243;&#30340;&#27597;&#32447;&#31243;&#20043;&#20013;&#12290;</FONT></P>
  <DD>
  <P><FONT 
  face=&#24494;&#36719;&#38597;&#40657;>&#65288;&#36825;&#19968;&#27573;&#34920;&#31034;&#27809;&#30475;&#30340;&#22826;&#26126;&#30333;&#65292;&#21487;&#33021;&#32763;&#35793;&#20063;&#26377;&#28857;&#20559;&#24046;&#65292;&#22914;&#26524;&#26377;&#20154;&#30475;&#21040;&#36825;&#19968;&#27573;&#30340;&#35805;&#24076;&#26395;&#21487;&#20197;&#20462;&#27491;&#19968;&#19979;&#21543;ииииии&#65289;</FONT></P>
  <DD>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>&#21407;&#25991;&#22914;&#19979;&#65306;</FONT></P>
  <DD>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>Switches the context to the parent of the current 
  fiber.</FONT></P>
  <DD>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>The yield method returns the provided arguments to 
  Fiber#resume when switching the context.</FONT></P>
  <DD>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>For arg, specify the object to pass to the parent of the 
  current fiber.</FONT></P><PRE><FONT face=&#24494;&#36719;&#38597;&#40657;>a = nil
f = Fiber.new do
  a = Fiber.yield()
end

f.resume()
f.resume(:foo)

p a  #=&gt; :foo
</FONT></PRE></DD></DL>
<H2><FONT face=&#24494;&#36719;&#38597;&#40657;>&#23454;&#20363;&#26041;&#27861;</FONT></H2>
<DL>
  <DT><FONT face=&#24494;&#36719;&#38597;&#40657;>resume(<VAR>*arg = nil</VAR>) </FONT>
  <DD>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>&#23558;&#36816;&#34892;&#29615;&#22659;&#20999;&#25442;&#33267;&#35843;&#29992;&#32773;&#30340;&#23376;&#32447;&#31243;&#12290; </FONT></P>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>&#24403;&#36816;&#34892;&#29615;&#22659;&#34987;&#20999;&#25442;&#30340;&#26102;&#20505;&#65292;resume &#26041;&#27861;&#20250;&#23558;&#21442;&#25968;&#36820;&#22238;&#32473; Fiber.yield &#12290;&nbsp;</FONT></P>
  <P><FONT face=&#24494;&#36719;&#38597;&#40657;>&#23545;&#20110;&#21442;&#25968; <VAR>arg</VAR>, &#20854;&#25351;&#23450;&#30340;&#23545;&#35937;&#23558;&#20250;&#20256;&#36882;&#21040;&#35843;&#29992;&#32773;&#25152;&#20195;&#34920;&#30340;&#32447;&#31243;&#20013;&#12290;</FONT></P><PRE><FONT face=&#24494;&#36719;&#38597;&#40657;>f = Fiber.new do
  Fiber.yield(:hoge)
end

a = f.resume()
f.resume()

p b  #=&gt; :hoge
</FONT></PRE></DD></DL>
<H6><FONT face=&#24494;&#36719;&#38597;&#40657;></FONT></H6></BODY></HTML>
