<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML lang=zh><HEAD><TITLE>Array</TITLE>
<META content="text/html; charset=GBK" http-equiv=Content-Type>
<META content=text/css http-equiv=Content-Style-Type><LINK rel=stylesheet
type=text/css href="../style.css">
<META name=GENERATOR content="MSHTML 9.00.8112.16447"></HEAD>
<BODY>
<H1></H1>
<P><A
href="syntax03.html#L000279"></A></P>
<H2></H2>
<UL>
  <LI><A href="sc_object.html"></A><FONT
  face=微软雅黑> </FONT></LI></UL>
<H2></H2>
<UL>
  <LI><A href="sm_enumerable.html"></A></LI></UL>
<H2></H2>
<DL>
  <DT>
  <DD>
  <P></P>
  <DT><A id=Array.2enew name=Array.2enew></A><FONT
  face=微软雅黑>Array.new([<VAR>size</VAR>[, <VAR>val</VAR>]]) </FONT>
  <DT><A id=Array.2enew_2 name=Array.2enew_2></A><FONT
  face=微软雅黑>Array.new(<VAR>ary</VAR>) </FONT>
  <DT><A id=Array.2enew_3 name=Array.2enew_3></A><FONT
  face=微软雅黑>Array.new(<VAR>size</VAR>) {|<VAR>index</VAR>| ... } </FONT>
  <DD>
  <P><FONT face=微软雅黑>创建一个数组。当它的 size 也就是长度被指定时，相应长度的数组会被创建出来，只不过所有的元素都是
  nil。如果第二个参数 val 也被指定了的话，那么参数中的数据会取代掉数组中的&nbsp;nil 元素。 (请注意，并不是每个元素都把 val 复制了一遍。所有元素都是对同一个对象 val 的引用。
  </FONT><A href="trap_Array.html"></A>)</P>
  <P></P><PRE></PRE>
  <P><FONT
  face=微软雅黑>第三种格式是设定一个存储着区块运算结果的值。区块在每一个元素中执行，所以它可能让所有元素都成为一个特定的对象：</FONT></P><PRE><FONT face=微软雅黑>p Array.new(5) {|i| i }         # =&gt; [0, 1, 2, 3, 4]

ary = Array.new(3, "foo")
ary.each {|obj| p obj.object_id }
# =&gt; 537774036
     537774036
     537774036

ary = Array.new(3) { "foo" }
ary.each {|obj| p obj.object_id }
# =&gt; 537770448
     537770436
     537770424</FONT></PRE></DD></DL>
<H2></H2>
<DL>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>获取第 <VAR>nth</VAR> 个数组元素。索引从 0 开始。若 <VAR>nth</VAR>
  为负值，则从尾部开始算起（最后一个元素的索引为 -1）。若第 <VAR>nth</VAR> 个元素不存在，则返回 nil。</FONT></P>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>返回从 <SPAN style="FONT-STYLE: italic">start</SPAN> 算起，包含
  <SPAN style="FONT-STYLE: italic">length</SPAN> 个元素的数组。若 <SPAN
  style="FONT-STYLE: italic">start</SPAN> 为负值，则从尾部开始算起（最后一个元素的索引为 -1）。若 <SPAN
  style="FONT-STYLE: italic">length</SPAN> 超出从 <SPAN
  style="FONT-STYLE: italic">start</SPAN> 算起的数组剩余长度，则忽略超出的部分。若 <SPAN
  style="FONT-STYLE: italic">length</SPAN> 为负值则返回 nil。 </FONT></P>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>将数组的第 <VAR>nth</VAR> 个元素之值改为 <VAR>val</VAR>。若
  <VAR>nth</VAR> 超出数组范围，则数组会自动延伸。所延伸的部分初始化为 nil。</FONT></P>
  <P></P>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>将数组中从 <SPAN style="FONT-STYLE: italic">start</SPAN> 开始算起
  <SPAN style="FONT-STYLE: italic">length</SPAN> 个元素的内容替换成 <SPAN
  style="FONT-STYLE: italic">val</SPAN> 。若 <SPAN
  style="FONT-STYLE: italic">val</SPAN> 非数组，则调用 val.to_ary 或使用 [val]
  来进行替换。</FONT></P>
  <DD>
  <P></P><PRE><FONT face=微软雅黑>ary = [0, 1, 2, 3]
ary[1, 2] = ["a", "b", "c"]
p ary                        # =&gt; [0, "a", "b", "c", 3]
ary[2, 1] = 99
p ary                        # =&gt; [0, "a", 99, "c", 3]
ary[1, 0] = ["inserted"]
p ary                        # =&gt; [0, "inserted", "a", 99, "c", 3]</FONT></PRE>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>将 <SPAN style="FONT-STYLE: italic">self </SPAN>和 <SPAN
  style="FONT-STYLE: italic">other</SPAN> 的内容连结起来并返回一个新的数组。若 <VAR>other</VAR>
  不是数组，则使用 other.to_ary 的返回值。若返回值不是数组，抛出 </FONT><A
  href="s_exceptions.html#TypeError"><FONT
  face=微软雅黑>TypeError型错误）</FONT></A></P><PRE><FONT face=微软雅黑>a = [1, 2]
b = [8, 9]
p a + b     # =&gt; [1, 2, 8, 9]
p a         # =&gt; [1, 2]        (不变)
p b         # =&gt; [8, 9]        (同样不变)</FONT></PRE>
  <DT>
  <DD>
  <P></P><PRE></PRE>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>减集操作。返回一个包含所有 <SPAN style="FONT-STYLE: italic">self</SPAN>
  元素、但是减去所有 <SPAN style="FONT-STYLE: italic">other</SPAN> 元素的新数组。</FONT></P>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>交集操作。返回一个包含在 <SPAN style="FONT-STYLE: italic">self</SPAN> 和
  <SPAN style="FONT-STYLE: italic">other</SPAN> 共有元素的数组。移除重复的元素。</FONT></P>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>并集操作。返回一个包含在 <SPAN style="FONT-STYLE: italic">self</SPAN> 和
  <SPAN style="FONT-STYLE: italic">other</SPAN> 所有元素的数组。移除重复的元素。</FONT></P>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>使用 &lt;=&gt;依次比较 <SPAN
  style="FONT-STYLE: italic">self</SPAN> 和 <SPAN
  style="FONT-STYLE: italic">other</SPAN> 的元素，若 <SPAN
  style="FONT-STYLE: italic">self</SPAN> 大于 <SPAN
  style="FONT-STYLE: italic">other</SPAN>，则返回 1、若 <SPAN
  style="FONT-STYLE: italic">self</SPAN> 等于 <SPAN
  style="FONT-STYLE: italic">other</SPAN>，则返回 0、若 <SPAN
  style="FONT-STYLE: italic">self</SPAN> 小于 <SPAN
  style="FONT-STYLE: italic">other</SPAN>，则返回
  -1。若是各元素均相等，且其中一个数组已到达尾部时，较短的数组判定为小。</FONT></P>
  <DT>
  <DD>
  <P></P>
  <DT>
  <DD>
  <P></P><PRE><FONT face=微软雅黑>ary = [1, 2]
ary.clear
p ary     # =&gt; []</FONT></PRE>
  <DT>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>返回一个与调用者有同样内容的数组。clone&nbsp;完完全全复制一个数组、包括冻结状态、特殊方法等，而 dup
  只有复制对象内容而已。clone 和 dup 都不会复制方法或元素本身。</FONT></P>
  <DT>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>返回一个除了 nil 元素以外，包含所有 self 元素的数组。compact!
  则是执行破坏性更新，若成功修改，就返回 <SPAN style="FONT-STYLE: italic">self</SPAN>，否则返回
  nil。</FONT></P><PRE><FONT face=微软雅黑>ary = [1, nil, 2, nil, 3, nil]
p ary.compact   # =&gt; [1, 2, 3]
p ary           # =&gt; [1, nil, 2, nil, 3, nil]
ary.compact!
p ary           # =&gt; [1, 2, 3]
p ary.compact!  # =&gt; nil</FONT></PRE>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>将 <SPAN style="FONT-STYLE: italic">other</SPAN> 连结到 <SPAN
  style="FONT-STYLE: italic">self</SPAN>（破坏性操作）。返回 <VAR>self</VAR>。</FONT></P><PRE><FONT face=微软雅黑>array = [1, 2]
a     = [3, 4]
array.concat a
p array          # =&gt; [1, 2, 3, 4]
p a              # =&gt; [3, 4]       # 没有变化</FONT></PRE>
  <DT>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>删除所有等于 <VAR>val</VAR> （借由 ==）的元素。若有任何元素与 <VAR>val</VAR>
  相等，返回 <VAR>val</VAR>。</FONT></P>
  <P><FONT face=微软雅黑>若没有任何元素与 <VAR>val</VAR> 相等，返回
  nil。若指定了区块，则对区块进行计算并返回计算结果。</FONT></P><PRE><FONT face=微软雅黑>array = [1, 2, 3, 2, 1]
p array.delete(2)       # =&gt; 2
p array                 # =&gt; [1, 3, 1]

# 若参数为 nil 而没有指定区块，则无法从返回值判断到底有没有进行删除<BR>ary = [nil,nil,nil]
p ary.delete(nil)       # =&gt; nil
p ary                   # =&gt; []
p ary.delete(nil)       # =&gt; nil</FONT></PRE>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>删除在 <SPAN style="FONT-STYLE: italic">pos</SPAN>
  位置的元素，并返回被删除的元素。若 <VAR>pos</VAR> 超出数组范围则返回 nil。</FONT></P><PRE><FONT face=微软雅黑>array = [0, 1, 2, 3, 4]
array.delete_at 2
p array             # =&gt; [0, 1, 3, 4]</FONT></PRE>
  <DT>
  <DT>
  <DD>
  <P></P>
  <P><FONT face=微软雅黑>delete_if&nbsp;会返回 self ，而 reject!&nbsp;会返回 self
  （如果有元素被删除）或者 nil （如果没有元素被删除）。</FONT></P>
  <DT>
  <DD>
  <P></P><PRE><FONT face=微软雅黑># 1, 2, 3 are displayed in order
[1, 2, 3].each do |i|
  puts i
end</FONT></PRE>
  <DT>
  <DD>
  <P></P><PRE></PRE>
  <P></P>
  <DT>
  <DD>
  <P></P>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>若数组中任一元素等于 <SPAN
  style="FONT-STYLE: italic">val</SPAN>（使用==），返回 true。</FONT></P>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>返回数组第一个等于 <VAR>val</VAR>（使用 ==）的元素的索引。若找不到相等的元素则返回
  nil。</FONT></P>
  <DT><FONT face=微软雅黑>insert(<VAR>nth</VAR>, [<VAR>val</VAR>[, <VAR>val2</VAR>
  ...]]) </FONT>
  <DD>
  <P><FONT face=微软雅黑>在第 nth 个元素前面插入第二个参数以及后面的所有参数。返回
  <VAR>self</VAR>。定义如下：</FONT></P><PRE><FONT face=微软雅黑>class Array
  def insert( n, *vals )
    self[n, 0] = vals
    self
  end
end
</FONT></PRE><PRE><FONT face=微软雅黑>ary = ["foo", "bar", "baz"]
ary.insert 2, 'a', 'b'
p ary                  # =&gt; ["foo", "bar", "a", "b", "baz"]</FONT></PRE>
  <P></P>
  <DT>
  <DT>
  <DD>
  <P></P>
  <DT>
  <DD>
  <P></P>
  <DT>
  <DD>
  <P></P><PRE><FONT face=微软雅黑>array = [1, [2, 3], 4]
p array.pop      # =&gt; 4
p array.pop      # =&gt; [2, 3]
p array          # =&gt; [1]

p array.pop      # =&gt; 1
p array.pop      # =&gt; nil
p array          # =&gt; []</FONT></PRE>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>依次将 <VAR>obj1</VAR>, <VAR>obj2</VAR> ...
插入数组的尾部。</FONT></P>
  <P></P><PRE><FONT face=微软雅黑>array = [1, 2, 3]
array.push 4
array.push [5, 6]
array.push 7, 8
p array          # =&gt; [1, 2, 3, 4, [5, 6], 7, 8]</FONT></PRE>
  <DT>
  <DT>
  <DD>
  <P></P>
  <P><FONT face=微软雅黑>reverse 总是返回一个新的数组，而 reverse! 返回
<VAR>self</VAR>。</FONT></P>
  <DT>
  <DD>
  <P></P>
  <DT>
  <DT>
  <DT>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>将数组内容排序。若是带区块调用，则传递两个参数给区块，用区块计算的结果进行排序。不带区块时，使用 &lt;=&gt;
  对元素进行比较。sort! 则是对数组元素进行破坏型更新。</FONT></P>
  <DD>
  <P></P>
  <DT>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>uniq 返回一个移除重复元素的新数组。剩余的元素会自动向前补足空缺。uniq! 进行破坏性删除，成功执行删除时返回
  self ，否则返回 nil。</FONT></P>
  <DT>
  <DD>
  <P><FONT face=微软雅黑>将 <VAR>obj1</VAR>、<VAR>obj2</VAR> ...
依次插入在数组的头部。</FONT></P>
  <P></P></DD></DL>
<H6></H6></BODY></HTML>
