<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML lang=en><HEAD><TITLE>RPG::UsableItem::Damage</TITLE>
<META content="text/html; charset=ISO-8859-1" http-equiv=Content-Type>
<META content=text/css http-equiv=Content-Style-Type><LINK rel=stylesheet 
type=text/css href="../style.css">
<META name=GENERATOR content="MSHTML 9.00.8112.16447"></HEAD>
<BODY>
<H1>RPG::UsableItem::Damage</H1>
<P>&#20260;&#23475;&#30340;&#25968;&#25454;&#31867;&#12290;</P>
<H2>&#36229;&#31867;</H2>
<UL>
  <LI><A href="sc_object.html">Object</A> </LI></UL>
<H2>&#35843;&#29992;&#32773;</H2>
<UL>
  <LI><A href="gc_rpg_usableitem.html">RPG::UsableItem</A> </LI></UL>
<H2>&#23646;&#24615;</H2>
<DL>
  <DT>type 
  <DD>
  <P>&#20260;&#23475;&#31867;&#22411;&#12290;</P>
  <UL>
    <LI>0:&nbsp;&#26080; 
    <LI>1: &#20307;&#21147;&#20540;&#20260;&#23475;
    <LI>2: &#39764;&#21147;&#20540;&#20260;&#23475;
    <LI>3:&nbsp;&#20307;&#21147;&#20540;&#24674;&#22797; 
    <LI>4: &#39764;&#21147;&#20540;&#24674;&#22797;
    <LI>5: &#20307;&#21147;&#20540;&#21560;&#25910;
    <LI>6: &#39764;&#21147;&#20540;&#21560;&#25910;</LI></UL>
  <DT>element_id 
  <DD>
  <P>&#23646;&#24615;&#32534;&#21495;&#12290;</P>
  <DT>formula 
  <DD>
  <P>&#35745;&#31639;&#20844;&#24335;&#12290;</P>
  <DT>variance 
  <DD>
  <P>&#31163;&#25955;&#24230;&#12290;</P>
  <DT>critical 
  <DD>
  <P>&#20801;&#35768;&#24517;&#26432;&#65288;true/false&#65289;&#12290;</P></DD></DL>
<H2>&#26041;&#27861;</H2>
<DL>
  <DT>none? 
  <DD>
  <P>&#21028;&#26029;&#20260;&#23475;&#23545;&#35937;&#26159;&#21542;&#20026;&#31354;&#65292;&#24403;&#20260;&#23475;&#31867;&#22411;&#20026; 0 &#26102;&#36820;&#22238;true&#12290;</P>
  <DT>to_hp? 
  <DD>
  <P>&#21028;&#26029;&#20260;&#23475;&#23545;&#35937;&#26159;&#21542;&#20026; HP&#22411;&#20026;&nbsp;1&#12289;3 &#25110; 5&nbsp;&#26102;&#36820;&#22238;true&#12290;</P>
  <DT>to_mp? 
  <DD>
  <P>&#21028;&#26029;&#20260;&#23475;&#23545;&#35937;&#26159;&#21542;&#20026; MP&#22411;&#20026; 2&#12289;4 &#25110;&nbsp;6 &#26102;&#36820;&#22238;true&#12290;</P>
  <DT>recover? 
  <DD>
  <P>&#21028;&#26029;&#20260;&#23475;&#32467;&#26524;&#26159;&#21542;&#20026;&#24674;&#22797;&#65292;&#24403;&#20260;&#23475;&#31867;&#22411;&#20026; 3&#12289;4 &#26102;&#36820;&#22238;true&#12290;</P>
  <DT>drain? 
  <DD>
  <P>&#21028;&#26029;&#20260;&#23475;&#32467;&#26524;&#26159;&#21542;&#20026;&#21560;&#25910;&#65292;&#24403;&#20260;&#23475;&#31867;&#22411;&#20026; 5&#12289;6 &#26102;&#36820;&#22238;true&#12290;</P>
  <DT>sign 
  <DD>
  <P>&#21028;&#26029;&#20260;&#23475;&#32467;&#26524;&#65292;&#22914;&#26524;&#26159;&#24674;&#22797;&#65292;&#21017;&#36820;&#22238; -1 &#65292;&#21542;&#21017;&#36820;&#22238; 1 &#12290;</P>
  <DT>eval(<VAR>a</VAR>, <VAR>b</VAR>, <VAR>v</VAR>) 
  <DD>
  <P>&#26681;&#25454;&#21442;&#25968;&#25191;&#34892;&#35745;&#31639;&#20844;&#24335;&#65292;&#21442;&#25968; a&#65292;b&#65292;v &#20998;&#21035;&#25351;&#23450;&#20102;&#25216;&#33021;&#37322;&#25918;&#32773;&#25152;&#22312;&#38431;&#20237;&#12289;&#25216;&#33021;&#25215;&#21463;&#32773;&#25152;&#22312;&#38431;&#20237;&#20197;&#21450;&#25152;&#38656;&#30340;&#21464;&#37327;&#12290;</P>
  <P>&#22914;&#26524;&#20260;&#23475;&#32467;&#26524;&#26159;&#24674;&#22797;&#65292;&#37027;&#20040;&#23601;&#20250;&#36820;&#22238;&#19968;&#20010;&#36127;&#20540;&#12290;</P></DD></DL>
<H2>&#23450;&#20041;</H2><PRE>class RPG::UsableItem::Damage
  def initialize
    @type = 0
    @element_id = 0
    @formula = '0'
    @variance = 20
    @critical = false
  end
  def none?
    @type == 0
  end
  def to_hp?
    [1,3,5].include?(@type)
  end
  def to_mp?
    [2,4,6].include?(@type)
  end
  def recover?
    [3,4].include?(@type)
  end
  def drain?
    [5,6].include?(@type)
  end
  def sign
    recover? ? -1 : 1
  end
  def eval(a, b, v)
    [Kernel.eval(@formula), 0].max * sign rescue 0
  end
  attr_accessor :type
  attr_accessor :element_id
  attr_accessor :formula
  attr_accessor :variance
  attr_accessor :critical
end
</PRE>
<H6></H6></BODY></HTML>
