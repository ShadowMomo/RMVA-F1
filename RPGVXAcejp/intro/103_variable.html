<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>変数</title>
<link href="../style.css" type="text/css" rel="stylesheet">
</head>
<body>

<h1>変数</h1>
<ul>
<li><a href="#name">変数の名前</a></li>
<li><a href="#subst">代入と参照</a></li>
<li><a href="#self">自己代入</a></li>
<li><a href="#global">グローバル変数</a></li>
<li><a href="#nil">nil</a></li>
</ul>

<p><strong>変数</strong>とは、何らかの値に名前を付けたものです。</p>


<h2><a name="name">変数の名前</a></h2>
<p>変数は名前を付けて管理されます。たとえば x や y、あるいはもっと長い
level とか gold のような名前です。名前の長さには制限がありません。</p>
<p>変数にはいくつかの種類がありますが、最初はもっとも基本的
な<strong>ローカル変数</strong>のみを扱います。ローカル変数というのは、
後述するグローバル変数の対になる言葉で、原則としてプログラムの一部でのみ
「ローカルに」利用可能な変数のことです。<p>
<p>ローカル変数の名前の規則は
以下の通りです。特に 1 番目の条件に注意してください。</p>
<ol>
<li>先頭の文字が、英小文字または _ (アンダースコア) であること。</li>
<li>二番目以降の文字が英字、数字、または _ (アンダースコア) であること。</li>
<li><strong>予約語</strong>ではないこと。</li>
</ol>

<p>予約語というのは以下のものです。これらは Ruby で特別な意味を持つ
単語として「予約」されているので、変数名としては使えません。</p>
<pre>
alias    def      false    nil      return   unless
and      do       for      not      self     until
begin    else     if       or       super    when
break    elsif    in       redo     then     while
case     end      module   rescue   true     yield
class    ensure   next     retry    undef
</pre>

<p>上記以外なら基本的にどんな名前でも使うことができます。</p>

<p>良い例:</p>
<pre>
foo
tkool2000
_test
</pre>
<p>悪い例:</p>
<pre>
2003tkool   # 数字が先頭に来ている
Alex        # 大文字で始まっている
def         # 予約語を使っている
</pre>


<h2><a name="subst">代入と参照</a></h2>
<p>実際に変数を使ってみましょう。</p>
<pre>
x = 3
y = 4
p x + y     # =&gt; 7
</pre>
<p>1 行目と 2 行目では、変数への<strong>代入</strong>を行っていま
す。= という記号は<strong>代入演算子</strong>というものです。
数学で使う等号のように「左辺と右辺が等しい」という意味ではなく、
「左辺の変数が右辺の値を指すようにする」という意味になります。
上記の例では、1 行目で x という名前の変数に 3 が、2 行目で y と
いう名前の変数に 4 がそれぞれ代入されます。</p>
<p>3 行目では、変数 x と y を<strong>参照</strong>しています。参照
というのは、その変数の値を取得するということです。変数は直接数値を
書いた場合と全く同じように計算などを行うことができます。ここでは
x + y という式は 3 + 4 と解釈され、計算結果は 7 となります。</p>
<p>なお、一度も代入されていないローカル変数をいきなり参照しようと
すると、その時点でエラーになってしまいます。</p>
<pre>
p zzz       # ERROR!!
</pre>
<p>変数は、何かを代入してから使うものだと覚えておいてください。</p>
<pre>
zzz = 5
p zzz       # =&gt; 5
</pre>
<p>このように、1 行目で zzz という変数に 5 を代入したあとでは、参照
することができるようになります。</p>


<h2><a name="self">自己代入</a></h2>
<p>変数が自分自身の値を参照し、計算した結果をあらためて自分に代入する
ことを<strong>自己代入</strong>と呼びます。</p>
<pre>
x = 1
x += 7
x -= 3
x *= 2
p x         # =&gt; 10
</pre>
<p>2 行目の x += 7 というのは、x = x + 7 と同じ意味です。つまり、
変数 x に 7 を加算するということです。同様に、-=、*=、/=、%= なども
使うことができます。このような演算子を<strong>自己代入演算子</strong>と
呼びます。</p>
<p>自己代入は、ツクールの変数で行う計算の処理に考え方が似ています。
この例では、まず 1 行目で代入した値 1 に 2 行目で 7 を足しています。
この時点で x の値は 8 になっています。さらに 3 を引き、最後に 2 を
掛けていますから、計算結果は 10 となるわけです。</p>


<h2><a name="global">グローバル変数</a></h2>
<p>ローカル変数は一時的に使用するための変数なので、関数やクラスなどの
定義 (後述) から外に出ると、その値は失われてしまいます。これに対して、
プログラムのどこからでも参照できる<strong>グローバル変数</strong>という
ものがあります。グローバル変数は、プログラム中のどこで使われていても、
同じ名前であれば、必ず同じ変数として扱われます。</p>
<p>次のように、$ という文字で始まる変数はグローバル変数として扱われます。
代入などの方法は、ローカル変数と全く同じです。</p>
<pre>
$global
</pre>
<p>どこからでも参照できるからといって、ローカル変数よりグローバル変数
を使ったほうが良いということではありません。グローバル変数はその強力さ
ゆえに、むやみに使うとプログラムがわかりにくくなってしまう恐れがありま
す。使用する際には十分注意しましょう。</p>


<h2><a name="nil">nil</a></h2>
<p>グローバル変数の場合、ローカル変数とは異なり、一度も代入されていない
変数を使用してもエラーにはなりません。</p>
<pre>
p $global   # =&gt; nil
</pre>
<p><strong>nil</strong> は「何もない」ということを表します。
これは、他にもさまざまな局面で使用される重要な値です。
よく覚えておきましょう。</p>


<h6></h6>

</body>
</html>
